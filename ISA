

* len (unsigned), ofs (signed), uofs (unsigned), val (signed), uval (unsigned)

 5 (1)  : 0 0 0 n n n n n
13 (2)  : 0 0 1 n n n n n . n n n n n n n n
21 (3)  : 0 1 0 n n n n n . n n n n n n n n . n n n n n n n n
29 (4)  : 0 1 1 n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n
37 (5)  : 1 0 0 n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n
64 (9)  : 1 0 1 x x x x x . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n
80 (11) : 1 1 0 x x x x x . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n

nnn..n is big-endian

* str

len+data (data is null-terminated)

* base+ofs (signed)

 3 (1) : 0 0 0 b b n n n
11 (2) : 0 0 1 b b n n n . n n n n n n n n
19 (3) : 0 1 0 b b n n n . n n n n n n n n . n n n n n n n n
27 (4) : 0 1 1 b b n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n
35 (5) : 1 0 0 b b n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n
64 (9) : 1 0 1 b b x x x . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n . n n n n n n n n

bb
00 sp
01 bp
10 ap
11 ...	(requires bits 7..5 to be 0)
   	ofs
	0	dst

nnn..n is big-endian

* opcode

00     noop

01     stack_free	n:len

02     stack_alloc	n:len

03     stack_free_alloc	nfree:len nalloc:len

04     inst_assign	dst:base+ofs src:base+ofs

05     stack_push	src:base+ofs

06     method_callc	dst:base+ofs sel:str selhash:uint32 argc:len

07     ret

08     retd

09     except_push	var:base+ofs

0a     except_raise	inst:base+ofs

0b     except_reraise

0c     except_pop

0d     except_popn	n:len

0e     jmp		ofs:ofs

0f     jt		ofs:ofs

10     jf		ofs:ofs

11     jx		ofs:ofs

12     ift		ofs:ofs

13     iff		ofs:ofs

14     env_atc  	dst:base+ofs name:str

15     env_atc_push	name:str

16     nil_new		dst:base+ofs

17     nil_push

18,19  bool_newc	dst:base+ofs

1a,1b  bool_pushc

1c     int_newc		dst:base+ofs val:val

1d     int_pushc	val:val

1e     float_newc	dst:base+ofs val:floatval

1f     float_pushc	val:floatval

20     method_newc	dst:base+ofs addr:ofs

21     method_pushc	addr:ofs

22     cmethod_newc	dst:base+ofs addr:ofs

23     cmethod_pushc	addr:ofs

24     str_newc		dst:base+ofs str:str

25     str_pushc	str:str

26     str_newc_hash	dst:base+ofs str:str hash

27     str_pushc_hash	str:str
